#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 TypeScript..."
npm run -s typecheck:app || { echo "❌ TS con errores"; exit 1; }

echo "🔧 ESLint..."
npm run -s lint || { echo "❌ ESLint con errores"; exit 1; }

echo "🛑 Imports prohibidos..."
if grep -R "@/_deprecated\|@/z_trash" src --include="*.ts" --include="*.tsx" 2>/dev/null; then
  echo "❌ Se detectaron imports desde _deprecated/z_trash"
  exit 1
fi

echo "✅ pre-commit OK"
