const { initializeApp, cert } = require("firebase-admin/app"); const { getAuth } = require("firebase-admin/auth"); const serviceAccount = require("./firebase-adminsdk.json"); const app = initializeApp({ credential: cert(serviceAccount), projectId: "aiduxcare-mvp-prod" }); const auth = getAuth(app); async function main() { try { console.log("Iniciando test de Identity Platform..."); const userRecord = await auth.createUser({ email: "test@example.com", password: "test123", displayName: "Test User" }); console.log("PASS: Usuario creado:", userRecord.uid); const user = await auth.getUser(userRecord.uid); if (user.email === "test@example.com") { console.log("PASS: Usuario le√≠do correctamente"); } await auth.deleteUser(userRecord.uid); console.log("PASS: Usuario eliminado correctamente"); process.exit(0); } catch (e) { console.error("FAIL:", e); process.exit(1); } } main();
