
> aiduxcare-v2@0.1.0 test
> vitest --reporter verbose


 DEV  v0.29.8 /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2

 ‚úì src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > renderiza correctamente el componente con logs locales
 √ó src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > expande y muestra los logs cuando se hace clic en el bot√≥n
   ‚Üí Unable to find an element with the text: /Transcripci√≥n de Audio/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > muestra los detalles correctos para cada tipo de log
   ‚Üí Unable to find an element with the text: /Tipo de Bloque: Memoria Contextual/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚úì src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > muestra un mensaje cuando no hay logs para mostrar
 √ó src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > formatea correctamente las fechas y horas
   ‚Üí Unable to find an element with the text: /20\/03\/2024, 10:00:00/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > muestra las etiquetas de fuente con los colores correctos
   ‚Üí Unable to find an element with the text: Audio. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
stderr | src/__tests__/LoginPage.test.tsx > LoginPage Component > renderiza el formulario de login correctamente
‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > renderiza correctamente el t√≠tulo del visor
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > muestra los t√≠tulos de las tres secciones de memoria
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > muestra correctamente el contenido de la memoria contextual
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > muestra correctamente el contenido de la memoria persistente
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > muestra un mensaje cuando no hay datos en una secci√≥n
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > muestra el modo editable cuando editable es true
 √ó src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > llama a onSave cuando se confirman los cambios
   ‚Üí expected "spy" to be called with arguments: [ { contextual: { ‚Ä¶(2) }, ‚Ä¶(2) } ]

Received: 


Number of calls: 0

 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > renderiza el t√≠tulo del editor
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > muestra las instrucciones
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > muestra botones de validaci√≥n para cada bloque
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > permite editar contenido de un bloque
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > cambia el estado de validaci√≥n al hacer clic en el bot√≥n
 ‚úì src/__tests__/LoginPage.test.tsx > LoginPage Component > renderiza el formulario de login correctamente
 √ó src/__tests__/LoginPage.test.tsx > LoginPage Component > muestra error cuando los campos est√°n vac√≠os
   ‚Üí Unable to find an accessible element with the role "form"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Iniciar sesi√≥n":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Credenciales de demostraci√≥n:":
  [36m<h3[39m
    [33mclass[39m=[32m"text-sm font-medium text-slateBlue mb-2"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Iniciar sesi√≥n":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Reg√≠strate":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/register"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mIniciar sesi√≥n[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mAccede a tu cuenta para gestionar pacientes y consultas[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"current-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mIniciar sesi√≥n[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øNo tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/register"[39m
            [36m>[39m
              [0mReg√≠strate[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mt-8 p-4 border border-gray-200 rounded-md bg-gray-50"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-sm font-medium text-slateBlue mb-2"[39m
          [36m>[39m
            [0mCredenciales de demostraci√≥n:[0m
          [36m</h3>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
          [36m>[39m
            [0mProfesional: demo@aiduxcare.com / password123[0m
          [36m</p>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
          [36m>[39m
            [0mPaciente: paciente@aiduxcare.com / password123[0m
          [36m</p>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70"[39m
          [36m>[39m
            [0mAdmin: admin@aiduxcare.com / password123[0m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > habilita el bot√≥n de confirmaci√≥n solo cuando todos los bloques est√°n validados
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > llama a onSave cuando se hace clic en el bot√≥n de confirmaci√≥n
 ‚úì src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > Modo editable > muestra indicador de que la persistencia real estar√° disponible en una versi√≥n futura
stderr | src/__tests__/RegisterPage.test.tsx > RegisterPage Component > renderiza el formulario de registro correctamente
‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 √ó src/__tests__/RegisterPage.test.tsx > RegisterPage Component > renderiza el formulario de registro correctamente
   ‚Üí Unable to find an accessible element with the role "heading" and name "Reg√≠strate"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Registro":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Nombre completo":
  [36m<input[39m
    [33mautocomplete[39m=[32m"name"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"fullname"[39m
    [33mname[39m=[32m"fullname"[39m
    [33mplaceholder[39m=[32m"Nombre completo"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "Tipo de cuenta":
  [36m<select[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"role"[39m
    [33mname[39m=[32m"role"[39m
  [36m/>[39m

  --------------------------------------------------
  option:

  Name "Paciente":
  [36m<option[39m
    [33mvalue[39m=[32m"patient"[39m
  [36m/>[39m

  Name "Profesional sanitario":
  [36m<option[39m
    [33mvalue[39m=[32m"professional"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Registrarme":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Inicia sesi√≥n":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/login"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mRegistro[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mCrea una cuenta para acceder al sistema[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"fullname"[39m
              [36m>[39m
                [0mNombre completo[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"name"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"fullname"[39m
                [33mname[39m=[32m"fullname"[39m
                [33mplaceholder[39m=[32m"Nombre completo"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"new-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slateBlue mb-1"[39m
                [33mfor[39m=[32m"role"[39m
              [36m>[39m
                [0mTipo de cuenta[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"role"[39m
                [33mname[39m=[32m"role"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"patient"[39m
                [36m>[39m
                  [0mPaciente[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"professional"[39m
                [36m>[39m
                  [0mProfesional sanitario[0m
                [36m</option>[39m
              [36m</select>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
              [36m>[39m
                [0mNota: Las cuentas de administrador solo pueden ser creadas por el administrador del sistema.[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mRegistrarme[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øYa tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mInicia sesi√≥n[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó src/__tests__/RegisterPage.test.tsx > RegisterPage Component > muestra errores de validaci√≥n cuando faltan campos
   ‚Üí Unable to find an accessible element with the role "form"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Registro":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Nombre completo":
  [36m<input[39m
    [33mautocomplete[39m=[32m"name"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"fullname"[39m
    [33mname[39m=[32m"fullname"[39m
    [33mplaceholder[39m=[32m"Nombre completo"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "Tipo de cuenta":
  [36m<select[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"role"[39m
    [33mname[39m=[32m"role"[39m
  [36m/>[39m

  --------------------------------------------------
  option:

  Name "Paciente":
  [36m<option[39m
    [33mvalue[39m=[32m"patient"[39m
  [36m/>[39m

  Name "Profesional sanitario":
  [36m<option[39m
    [33mvalue[39m=[32m"professional"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Registrarme":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Inicia sesi√≥n":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/login"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mRegistro[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mCrea una cuenta para acceder al sistema[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"fullname"[39m
              [36m>[39m
                [0mNombre completo[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"name"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"fullname"[39m
                [33mname[39m=[32m"fullname"[39m
                [33mplaceholder[39m=[32m"Nombre completo"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"new-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slateBlue mb-1"[39m
                [33mfor[39m=[32m"role"[39m
              [36m>[39m
                [0mTipo de cuenta[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"role"[39m
                [33mname[39m=[32m"role"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"patient"[39m
                [36m>[39m
                  [0mPaciente[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"professional"[39m
                [36m>[39m
                  [0mProfesional sanitario[0m
                [36m</option>[39m
              [36m</select>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
              [36m>[39m
                [0mNota: Las cuentas de administrador solo pueden ser creadas por el administrador del sistema.[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mRegistrarme[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øYa tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mInicia sesi√≥n[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚úì src/__tests__/LoginPage.test.tsx > LoginPage Component > deshabilita el bot√≥n cuando loading es true
 ‚úì src/__tests__/LoginPage.test.tsx > LoginPage Component > permite ingresar texto en los campos
 ‚úì src/__tests__/RegisterPage.test.tsx > RegisterPage Component > permite escribir en los inputs
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Renderizado b√°sico > renderiza correctamente el componente con sugerencias
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Renderizado b√°sico > muestra mensaje cuando no hay sugerencias
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Interacci√≥n con sugerencias > expande y muestra las sugerencias agrupadas por tipo
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Interacci√≥n con sugerencias > muestra el contenido correcto de cada sugerencia
stderr | src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Integraci√≥n con EMR > maneja errores al integrar sugerencias
Error al integrar sugerencia: Error: Error al integrar sugerencia
    at Object.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx:254:24[90m)[39m
    at Object.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Object.spy [as insertSuggestion] [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at handleSuggestionAccepted [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentSuggestionsViewer.tsx:92:44[90m)[39m
    at onAccept [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentSuggestionsViewer.tsx:183:39[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m

 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Integraci√≥n con EMR > integra correctamente una sugerencia al EMR
 √ó __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 1: Renderizado de sugerencias v√°lidas > debe mostrar las sugerencias agrupadas por tipo cuando se expande
   ‚Üí Unable to find an element with the text: /Recomendaciones \(2\)/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m4[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"recommendation-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0müí°[0m
            [0m [0m
            [0mrecommendation[0m
            [0m ([0m
            [0m2[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-blue-50 border-blue-200"[39m
            [33mdata-testid[39m=[32m"suggestion-cce76531-a9f4-4b36-aa35-1d7c3fad3519"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mRealizar ECG para evaluar posible cardiopat√≠a isqu√©mica[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-708[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-blue-50 border-blue-200"[39m
            [33mdata-testid[39m=[32m"suggestion-c2cea757-e992-4fb3-8a09-b000c2087413"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mAjustar dosis de metformina a 1000mg c/12h[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-524[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"warning-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0m‚ö†Ô∏è[0m
            [0m [0m
            [0mwarning[0m
            [0m ([0m
            [0m1[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-yellow-50 border-yellow-200"[39m
            [33mdata-testid[39m=[32m"suggestion-b2147d0a-8cf6-4165-b6e3-28cf5a09e74e"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mPaciente con HTA no controlada, considerar manejo urgente[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-625[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"info-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0m‚ÑπÔ∏è[0m
            [0m [0m
            [0minfo[0m
            [0m ([0m
            [0m1[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-green-50 border-green-200"[39m
            [33mdata-testid[39m=[32m"suggestion-586d83a4-4915-41ac-9700-f74aaad9c5d9"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mConsiderar referir a nutricionista para manejo de dislipidemia[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-290[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m4[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 1: Renderizado de sugerencias v√°lidas > debe mostrar el contador correcto de sugerencias
   ‚Üí Unable to find an element with the text: (content, element) => { return element?.tagName.toLowerCase() === "span" && content === "4"; } (normalized from '(content, element) => {
        return element?.tagName.toLowerCase() === "span" && content === "4";
      }'). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m4[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m4[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 2: Manejo de arrays de sugerencias vac√≠os > debe mostrar un mensaje cuando no hay sugerencias
   ‚Üí Unable to find an element with the text: (content) => content.includes("no tiene sugerencias"). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m0[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m0[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 2: Manejo de arrays de sugerencias vac√≠os > debe mostrar el contador en 0 cuando no hay sugerencias
   ‚Üí Unable to find an element with the text: (content, element) => { return element?.tagName.toLowerCase() === "span" && content === "0"; } (normalized from '(content, element) => {
        return element?.tagName.toLowerCase() === "span" && content === "0";
      }'). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m0[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m0[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > no muestra diferencias cuando tienen id√©ntico contenido
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques agregados con el estilo correcto
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques modificados con el estilo correcto
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques sin cambios con el estilo correcto
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra correctamente m√∫ltiples tipos de bloques
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > soporta expansi√≥n y colapso de grupos
   ‚Üí Cannot read properties of undefined (reading 'map')
 √ó __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > usa atributos de accesibilidad correctos
   ‚Üí Cannot read properties of undefined (reading 'map')
stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > no muestra diferencias cuando tienen id√©ntico contenido
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques agregados con el estilo correcto
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques modificados con el estilo correcto
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques sin cambios con el estilo correcto
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra correctamente m√∫ltiples tipos de bloques
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > soporta expansi√≥n y colapso de grupos
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > usa atributos de accesibilidad correctos
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'map')]
    at reportException (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'map')
    at AgentContextDiffViewer [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/shared/components/Agent/AgentContextDiffViewer.tsx:17:14[90m)[39m
    at renderWithHooks [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at mountIndeterminateComponent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:20103:13[90m)[39m
    at beginWork [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21626:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
    at HTMLUnknownElementImpl.dispatchEvent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:104:17[90m)[39m
The above error occurred in the <AgentContextDiffViewer> component:

    at AgentContextDiffViewer (/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/AgentContextDiffViewer.tsx:3:35)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 √ó __tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > debe renderizarse sin errores
   ‚Üí Unable to find an element with the text: Sugerencias del Agente Cl√≠nico. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m3[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m3[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚úì __tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > debe validar la integraci√≥n completa de sugerencias al EMR
 ‚úì __tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > debe verificar el proceso completo de integraci√≥n de sugerencias con validaci√≥n detallada
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Integraci√≥n con EMR > maneja errores al integrar sugerencias
 √ó src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Manejo de feedback > maneja correctamente el rechazo de una sugerencia
   ‚Üí expected "spy" to be called with arguments: [ 'suggestion_rejected', ‚Ä¶(1) ]

Received: 


Number of calls: 0

 √ó src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Manejo de feedback > registra m√©tricas de uso al rechazar sugerencias
   ‚Üí expected "spy" to be called with arguments: [ 'suggestions_rejected', ‚Ä¶(4) ]

Received: 


Number of calls: 0

 √ó src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Validaci√≥n de tipos de sugerencia > maneja correctamente sugerencias con tipos inv√°lidos
   ‚Üí Unable to find an element by: [data-testid="info-section"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m1[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m1[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
stderr | src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe lanzar un error si la visita no existe
Error al integrar sugerencia: Error: La visita visit-123 no existe
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:58:15[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/services/__tests__/SuggestionIntegrationService.test.ts:164:5
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m
    at run [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:251:3[90m)[39m

stderr | src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe manejar errores en la inserci√≥n de integrated_suggestions
Error al integrar sugerencia: { message: [32m'Error en la inserci√≥n de datos'[39m }

 ‚úì src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe integrar correctamente una sugerencia en un campo vac√≠o
 ‚úì src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe integrar correctamente una sugerencia en un campo con contenido previo
 √ó src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe lanzar un error si la visita no existe
   ‚Üí expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      Object {
        "integrated_at": "2025-05-22T13:56:54.529Z",
        "suggestion_id": "suggestion-789",
        "user_id": "user-456",
        "visit_id": "visit-123",
      },
    ]


Number of calls: 1

 √ó src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe manejar errores en la inserci√≥n de integrated_suggestions
   ‚Üí expected [Function] to throw error including 'Error al registrar la integraci√≥n de ‚Ä¶' but got 'Error en la inserci√≥n de datos'
 ‚úì src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe manejar errores en el upsert de emr_fields
stderr | src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe manejar errores en el upsert de emr_fields
Error al integrar sugerencia: Error: Error al integrar la sugerencia: Error en el upsert
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:89:15[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/services/__tests__/SuggestionIntegrationService.test.ts:193:5
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m
    at run [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:251:3[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:125:20
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:142:20
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:160:20
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:175:20
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:192:20
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:200:5
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
Error al ejecutar el agente cl√≠nico: Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

    at Object.get [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/chunk-runtime-mocker.3283818a.js:119:17[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:20:28[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:214:5
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
   ‚Üí [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getContextualMemory > retorna memoria contextual
   ‚Üí expected [] to deeply equal [ { id: '1', ‚Ä¶(4) } ]
 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getContextualMemory > lanza error cuando Supabase regresa error
   ‚Üí promise resolved "" instead of rejecting
 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getPersistentMemory > retorna memoria persistente
   ‚Üí expected [] to deeply equal [ { id: '2', ‚Ä¶(4) } ]
 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getPersistentMemory > lanza error en caso de fallo
   ‚Üí promise resolved "" instead of rejecting
 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getSemanticMemory > retorna memoria sem√°ntica
   ‚Üí expected [] to deeply equal [ { id: '3', ‚Ä¶(3) } ]
 √ó src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getSemanticMemory > lanza error cuando falla
   ‚Üí promise resolved "" instead of rejecting
stderr | src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe integrar una sugerencia en un campo vac√≠o
Error al integrar sugerencia: Error: La visita test-visit-1 no existe
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:58:15[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/__tests__/agent/SuggestionIntegrationService.test.ts:63:7
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe agregar una sugerencia a un campo existente con prefijo
Error al integrar sugerencia: TypeError: __vite_ssr_import_1__.default.from(...).select(...).eq(...).eq is not a function
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:66:10[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/__tests__/agent/SuggestionIntegrationService.test.ts:103:7
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:9[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si la visita no existe
Error al integrar sugerencia: TypeError: __vite_ssr_import_1__.default.from(...).insert is not a function
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:32:10[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/__tests__/agent/SuggestionIntegrationService.test.ts:126:38
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m

stderr | src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si hay un problema al obtener el campo
Error al integrar sugerencia: TypeError: __vite_ssr_import_1__.default.from(...).insert is not a function
    at Function.integrateSuggestion [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/SuggestionIntegrationService.ts:32:10[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/__tests__/agent/SuggestionIntegrationService.test.ts:144:38
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m

 √ó src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe integrar una sugerencia en un campo vac√≠o
   ‚Üí La visita test-visit-1 no existe
 √ó src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe agregar una sugerencia a un campo existente con prefijo
   ‚Üí default.from(...).select(...).eq(...).eq is not a function
 √ó src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si la visita no existe
   ‚Üí expected [Function] to throw error including 'La visita test-visit-1 no existe' but got 'default.from(..‚Ä¶'
 √ó src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si hay un problema al obtener el campo
   ‚Üí expected [Function] to throw error including 'Error al obtener el campo: Database e‚Ä¶' but got 'default.from(..‚Ä¶'
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor OpenAI
   ‚Üí Cannot read properties of undefined (reading '0')
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Anthropic
   ‚Üí Cannot read properties of undefined (reading '0')
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Mistral
   ‚Üí Cannot read properties of undefined (reading '0')
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Custom
   ‚Üí Cannot read properties of undefined (reading '0')
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a rechazar la promesa con un error si el proveedor no es soportado
   ‚Üí expected [Function] to throw error including 'Unsupported LLM provider' but got 'Cannot read properties of undefined (‚Ä¶'
 √ó __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a demorar aproximadamente 500ms en devolver la respuesta
   ‚Üí Cannot read properties of undefined (reading '0')
 √ó __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe generar un AgentContext v√°lido a partir de un MCPContext
   ‚Üí expected undefined to be 'visit-123' // Object.is equality
 √ó __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe excluir bloques vac√≠os o sin ID
   ‚Üí Cannot read properties of undefined (reading 'every')
 √ó __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe manejar valores por defecto cuando no hay datos
   ‚Üí expected undefined to be '' // Object.is equality
 √ó __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 1: Contexto cl√≠nico v√°lido > debe generar 2-3 sugerencias con explicaciones para un contexto v√°lido
   ‚Üí Cannot read properties of undefined (reading 'filter')
 √ó __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 1: Contexto cl√≠nico v√°lido > debe referenciar correctamente los bloques de origen de las sugerencias
   ‚Üí Cannot read properties of undefined (reading 'filter')
 √ó __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 2: Contexto vac√≠o > debe generar sugerencias gen√©ricas para un contexto vac√≠o
   ‚Üí Cannot read properties of undefined (reading 'filter')
 √ó __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 3: Contexto con datos contradictorios > debe generar sugerencias relevantes incluso con informaci√≥n contradictoria
   ‚Üí Cannot read properties of undefined (reading 'filter')
 √ó __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 4: Contexto de enfermedad cr√≥nica > debe generar sugerencias relevantes para el contexto de enfermedad cr√≥nica
   ‚Üí Cannot read properties of undefined (reading 'filter')
 √ó src/__tests__/Layout.test.tsx > Layout Component > renderiza correctamente con usuario autenticado
   ‚Üí [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó src/__tests__/Layout.test.tsx > Layout Component > muestra el men√∫ de navegaci√≥n con las opciones correctas
   ‚Üí [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó src/__tests__/Layout.test.tsx > Layout Component > contiene un bot√≥n de logout
   ‚Üí [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó src/__tests__/Layout.test.tsx > Layout Component > muestra pantalla de carga cuando loading es true
   ‚Üí [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a devolver un array con al menos 2 sugerencias v√°lidas
   ‚Üí executeAgent is not a function
 √ó __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a generar un prompt que contenga fragmentos del contexto original
   ‚Üí executeAgent is not a function
 √ó __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a incluir sourceBlockId v√°lido en las sugerencias
   ‚Üí executeAgent is not a function
 √ó __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > no deber√≠a lanzar errores si el contexto est√° parcialmente vac√≠o
   ‚Üí executeAgent is not a function
 √ó __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a utilizar diferentes LLMProviders seg√∫n se especifique
   ‚Üí executeAgent is not a function
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionFeedbackActions.test.tsx > AgentSuggestionFeedbackActions > debe mostrar los botones de aceptar y rechazar
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionFeedbackActions.test.tsx > AgentSuggestionFeedbackActions > debe llamar a onAccept al hacer clic en Aceptar
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionFeedbackActions.test.tsx > AgentSuggestionFeedbackActions > debe llamar a onReject al hacer clic en Rechazar
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionFeedbackActions.test.tsx > AgentSuggestionFeedbackActions > debe mostrar mensaje de integrado cuando isIntegrated es true
 ‚úì src/features/visits/new/VisitNewPage.test.tsx > VisitNewPage > debe renderizar el formulario de nueva visita
stderr | src/features/visits/new/VisitNewPage.test.tsx > VisitNewPage > debe renderizar el formulario de nueva visita
Error al cargar pacientes: TypeError: Cannot read properties of undefined (reading 'map')
    at PatientDataSourceSupabase.getAllPatients [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/dataSources/patientDataSourceSupabase.ts:34:32[90m)[39m
    at fetchPatients [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/features/visits/new/VisitNewPage.tsx:17:22[90m)[39m

 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > renderiza el bot√≥n de explicaci√≥n para sugerencias de tipo recommendation
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > renderiza el bot√≥n de explicaci√≥n para sugerencias de tipo warning
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > no renderiza nada para sugerencias de tipo info
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > muestra indicador de carga al solicitar una explicaci√≥n
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > muestra la explicaci√≥n despu√©s de hacer clic en el bot√≥n
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > oculta la explicaci√≥n al hacer clic en Ocultar explicaci√≥n
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > no vuelve a llamar a explainSuggestion si ya se gener√≥ una explicaci√≥n
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > maneja los errores cuando falla la generaci√≥n de explicaci√≥n
 ‚úì src/shared/components/Agent/__tests__/AgentSuggestionExplainer.test.tsx > AgentSuggestionExplainer > pasa la sugerencia correcta al servicio explainSuggestion
 ‚úì src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe construir un contexto v√°lido con bloques de memoria
 ‚úì src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe manejar errores de la base de datos correctamente
 ‚úì src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe manejar el caso cuando no hay bloques de memoria
 ‚úì src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe rechazar con un error si falla la consulta
 ‚úì src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe cumplir con el tipo AgentContext
stderr | src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe manejar errores de la base de datos correctamente
Error al construir el contexto del agente: Error: Error de base de datos
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/__tests__/AgentContextBuilder.test.ts:88:23
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/core/agent/__tests__/AgentContextBuilder.test.ts > AgentContextBuilder > debe rechazar con un error si falla la consulta
Error al construir el contexto del agente: Error: Error de conexi√≥n
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/__tests__/AgentContextBuilder.test.ts:133:21
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores durante la ejecuci√≥n
Error al ejecutar el agente cl√≠nico: Error: Error de prueba
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/__tests__/runClinicalAgent.test.ts:88:23
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores en el proceso de construcci√≥n del contexto
Error al ejecutar el agente cl√≠nico: Error: Error al construir contexto
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/__tests__/runClinicalAgent.test.ts:132:26
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

stderr | src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores en el proceso de ejecuci√≥n del agente
Error al ejecutar el agente cl√≠nico: Error: Error durante la ejecuci√≥n
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/__tests__/runClinicalAgent.test.ts:141:42
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe ejecutar el agente cl√≠nico correctamente
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores durante la ejecuci√≥n
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar correctamente un contexto vac√≠o sin lanzar errores
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe utilizar openai como proveedor por defecto
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe registrar m√©tricas cuando se generan sugerencias
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores en el proceso de construcci√≥n del contexto
 ‚úì src/core/agent/__tests__/runClinicalAgent.test.ts > runClinicalAgent > debe manejar errores en el proceso de ejecuci√≥n del agente
 ‚úì src/__tests__/core/mcp/MCPManager.test.ts > MCPManager con Supabase > deber√≠a llamar a las 3 funciones de acceso a Supabase
 ‚úì src/__tests__/core/mcp/MCPManager.test.ts > MCPManager con Supabase > deber√≠a construir un contexto v√°lido con datos de Supabase adaptados
 ‚úì src/__tests__/core/mcp/MCPManager.test.ts > MCPManager con Supabase > deber√≠a manejar errores y devolver contexto con arrays vac√≠os
 ‚úì src/__tests__/core/mcp/MCPManager.test.ts > MCPManager con Supabase > deber√≠a manejar valores undefined desde las funciones de Supabase
stderr | src/__tests__/core/mcp/MCPManager.test.ts > MCPManager con Supabase > deber√≠a manejar errores y devolver contexto con arrays vac√≠os
[MCPManager] Error al obtener memoria contextual: Error: Error de prueba
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/__tests__/core/mcp/MCPManager.test.ts:97:73
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runFiles [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:585:5[90m)[39m
    at startTests [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:594:3[90m)[39m
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:258:7
    at withEnv [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/dist/entry.js:195:5[90m)[39m

 ‚úì __tests__/evals/AudioCaptureService.eval.test.ts > EVAL: Sistema de Escucha Activa Cl√≠nica > Activaci√≥n manual del servicio > no inicia la captura autom√°ticamente sin interacci√≥n expl√≠cita
 ‚úì __tests__/evals/AudioCaptureService.eval.test.ts > EVAL: Sistema de Escucha Activa Cl√≠nica > Activaci√≥n manual del servicio > solo inicia la captura tras interacci√≥n expl√≠cita del profesional
 ‚úì __tests__/evals/AudioCaptureService.eval.test.ts > EVAL: Sistema de Escucha Activa Cl√≠nica > Revisi√≥n y aprobaci√≥n de segmentos > deshabilita la generaci√≥n de resumen cuando no hay transcripci√≥n
 ‚úì __tests__/evals/AudioCaptureService.eval.test.ts > EVAL: Sistema de Escucha Activa Cl√≠nica > Auditor√≠a y trazabilidad > registra correctamente los eventos de transcripci√≥n en el log de auditor√≠a
 ‚úì __tests__/evals/MCPContextBuilder.eval.test.ts > MCPContextBuilder EVAL > Caso 1: Datos cl√≠nicos completos > debe construir un contexto con estructura correcta a partir de datos completos
 ‚úì __tests__/evals/MCPContextBuilder.eval.test.ts > MCPContextBuilder EVAL > Caso 2: Datos con campos cr√≠ticos faltantes > debe preservar la estructura del contexto a pesar de campos faltantes
 ‚úì __tests__/evals/MCPContextBuilder.eval.test.ts > MCPContextBuilder EVAL > Caso 3: Datos con valores inconsistentes > debe preservar la mayor√≠a de datos ante valores inconsistentes
 ‚úì __tests__/evals/MCPContextBuilder.eval.test.ts > MCPContextBuilder EVAL > Caso 4: Datos m√≠nimos pero v√°lidos > debe generar un contexto con datos m√≠nimos
 ‚úì src/__tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > debe crear correctamente una instancia de AgentExecutor
 ‚úì src/__tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > debe ejecutar el agente y devolver sugerencias
 ‚úì src/__tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > debe devolver sugerencias con getSuggestions
 ‚úì src/__tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > debe manejar diferentes proveedores de LLM
 ‚úì src/__tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > debe manejar correctamente un contexto vac√≠o
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 1: Registro de actualizaciones v√°lidas > debe registrar correctamente las actualizaciones de bloques
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 2: Registro con datos vac√≠os > debe manejar correctamente arrays de bloques vac√≠os
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 2: Registro con datos vac√≠os > debe manejar correctamente el caso donde solo hay bloques originales
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 3: Registro con datos parciales > debe registrar solo los bloques que realmente cambiaron
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 3: Registro con datos parciales > debe ignorar bloques sin ID
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 4: Persistencia de logs > debe acumular m√∫ltiples logs en sesiones sucesivas
 ‚úì __tests__/evals/AuditLogger.eval.test.ts > AuditLogger EVAL > Caso 4: Persistencia de logs > debe proporcionar una copia de los logs, no una referencia
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Acceso a pacientes propios > should allow a professional to see their own patients
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Acceso a pacientes propios > should not allow a professional to see patients created by another
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Creaci√≥n de pacientes > should assign user_id correctly when creating a new patient
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Actualizaci√≥n de pacientes > should reject update if user_id !== auth.uid()
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Eliminaci√≥n de pacientes > should reject delete if user_id !== auth.uid()
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Comportamiento sin sesi√≥n activa > should return empty array when no session is available
 ‚úì __tests__/evals/patientsRLS.eval.test.ts > EVAL: Seguridad RLS para la tabla patients > Comportamiento sin sesi√≥n activa > should throw error when creating patient without session
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe devolver una respuesta v√°lida con sugerencias para OpenAI
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe devolver respuestas para diferentes proveedores
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe devolver sugerencias con sourceBlockId v√°lido
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe manejar un contexto vac√≠o sin errores
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe aceptar solo proveedores v√°lidos
 ‚úì src/core/agent/__tests__/LLMAdapter.test.ts > LLMAdapter > debe demorar aproximadamente 500ms en responder (simulando llamada a API)
 ‚úì __tests__/core/agent/ClinicalAgent.test.ts > ClinicalAgent > debe generar al menos 2 sugerencias simuladas
 ‚úì __tests__/core/agent/ClinicalAgent.test.ts > ClinicalAgent > debe generar sugerencias con sourceBlockId v√°lido
 ‚úì __tests__/core/agent/ClinicalAgent.test.ts > ClinicalAgent > debe generar sugerencias de tipo v√°lido
 ‚úì __tests__/core/agent/ClinicalAgent.test.ts > ClinicalAgent > debe generar sugerencias basadas en las palabras clave
 ‚úì __tests__/core/agent/ClinicalAgent.test.ts > ClinicalAgent > debe generar sugerencias gen√©ricas si no hay palabras clave
 ‚úì src/__tests__/core/mcp/MCPContextBuilder.test.ts > MCPContextBuilder Tests > debe validar la estructura correcta del contexto MCP
 ‚úì src/__tests__/core/mcp/MCPContextBuilder.test.ts > MCPContextBuilder Tests > debe detectar estructuras incorrectas del contexto MCP
 ‚úì src/__tests__/core/mcp/MCPContextBuilder.test.ts > MCPContextBuilder Tests > debe validar el formato correcto de los campos de fecha
 ‚úì __tests__/minimal.test.ts > Test funcional m√≠nimo > verifica que el sistema de test est√° configurado correctamente
 ‚úì __tests__/minimal.test.ts > Test funcional m√≠nimo > puede utilizar funciones de array
 ‚úì __tests__/minimal.test.ts > Test funcional m√≠nimo > puede trabajar con strings
 ‚úì src/__tests__/core/mcp/AuditLogger.test.ts > AuditLogger > deber√≠a registrar cambios en el contenido de los bloques
 ‚úì src/__tests__/core/mcp/AuditLogger.test.ts > AuditLogger > no deber√≠a registrar bloques si el contenido no ha cambiado
 ‚úì src/__tests__/core/mcp/AuditLogger.test.ts > AuditLogger > deber√≠a ignorar bloques sin ID
 ‚úì src/__tests__/core/mcp/AuditLogger.test.ts > AuditLogger > deber√≠a ignorar bloques que no existen en el original
 ‚úì src/__tests__/core/mcp/AuditLogger.test.ts > AuditLogger > deber√≠a limpiar los logs cuando se llama a clearAuditLogs

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Suites 8 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  __tests__/__evals__/AgentExecutor.eval.test.ts [ __tests__/__evals__/AgentExecutor.eval.test.ts ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/__tests__/__evals__/AgentExecutor.eval.test.ts
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/73]‚éØ

 FAIL  __tests__/__evals__/AgentSuggestionsViewer.eval.test.tsx [ __tests__/__evals__/AgentSuggestionsViewer.eval.test.tsx ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/__tests__/__evals__/AgentSuggestionsViewer.eval.test.tsx
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/73]‚éØ

 FAIL  __tests__/__evals__/AudioCaptureService.eval.test.ts [ __tests__/__evals__/AudioCaptureService.eval.test.ts ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/__tests__/__evals__/AudioCaptureService.eval.test.ts
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/73]‚éØ

 FAIL  __tests__/__evals__/AuditLogger.eval.test.ts [ __tests__/__evals__/AuditLogger.eval.test.ts ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/__tests__/__evals__/AuditLogger.eval.test.ts
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/73]‚éØ

 FAIL  __tests__/evals/AgentExecutor.eval.test.ts [ __tests__/evals/AgentExecutor.eval.test.ts ]
Error: Missing Supabase environment variables
 ‚ùØ src/core/config/env.ts:5:9
      3| 
      4| if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
      5|   throw new Error('Missing Supabase environment variables');
       |         ^
      6| } 
 ‚ùØ src/core/services/EMRFormService.ts:6:31
 ‚ùØ __tests__/evals/AgentExecutor.eval.test.ts:27:31

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/73]‚éØ

 FAIL  src/evals/__tests__/AgentSuggestionsViewer.eval.test.tsx [ src/evals/__tests__/AgentSuggestionsViewer.eval.test.tsx ]
Error: Missing Supabase environment variables
 ‚ùØ src/core/config/env.ts:5:9
      3| 
      4| if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
      5|   throw new Error('Missing Supabase environment variables');
       |         ^
      6| } 
 ‚ùØ src/core/services/EMRFormService.ts:6:31
 ‚ùØ src/shared/components/Agent/AgentSuggestionsViewer.tsx:6:31

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/73]‚éØ

 FAIL  src/core/services/__tests__/EMRFormService.test.ts [ src/core/services/__tests__/EMRFormService.test.ts ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/core/services/__tests__/EMRFormService.test.ts
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/73]‚éØ

 FAIL  src/shared/components/Agent/__tests__/AgentSuggestionsAnalytics.test.tsx [ src/shared/components/Agent/__tests__/AgentSuggestionsAnalytics.test.tsx ]
Error: No test suite found in file /Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/src/shared/components/Agent/__tests__/AgentSuggestionsAnalytics.test.tsx
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/73]‚éØ

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 65 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  __tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > debe renderizarse sin errores
TestingLibraryElementError: Unable to find an element with the text: Sugerencias del Agente Cl√≠nico. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m3[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m3[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ __tests__/AgentSuggestionsViewer.test.tsx:152:12
    150| 
    151|     // Verificar que se muestra el t√≠tulo del componente
    152|     expect(getByText('Sugerencias del Agente Cl√≠nico')).toBeInTheDocum‚Ä¶
       |            ^
    153|     
    154|     // Verificar que se muestra el bot√≥n para expandir

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/73]‚éØ

 FAIL  __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 1: Renderizado de sugerencias v√°lidas > debe mostrar las sugerencias agrupadas por tipo cuando se expande
TestingLibraryElementError: Unable to find an element with the text: /Recomendaciones \(2\)/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m4[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"recommendation-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0müí°[0m
            [0m [0m
            [0mrecommendation[0m
            [0m ([0m
            [0m2[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-blue-50 border-blue-200"[39m
            [33mdata-testid[39m=[32m"suggestion-cce76531-a9f4-4b36-aa35-1d7c3fad3519"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mRealizar ECG para evaluar posible cardiopat√≠a isqu√©mica[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-708[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-blue-50 border-blue-200"[39m
            [33mdata-testid[39m=[32m"suggestion-c2cea757-e992-4fb3-8a09-b000c2087413"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mAjustar dosis de metformina a 1000mg c/12h[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-524[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"warning-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0m‚ö†Ô∏è[0m
            [0m [0m
            [0mwarning[0m
            [0m ([0m
            [0m1[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-yellow-50 border-yellow-200"[39m
            [33mdata-testid[39m=[32m"suggestion-b2147d0a-8cf6-4165-b6e3-28cf5a09e74e"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mPaciente con HTA no controlada, considerar manejo urgente[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-625[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mdata-testid[39m=[32m"explanation-button"[39m
              [36m>[39m
                [0mVer explicaci√≥n[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
          [33mdata-testid[39m=[32m"info-section"[39m
        [36m>[39m
          [36m<h4[39m
            [33mclass[39m=[32m"text-md font-medium text-gray-700 flex items-center"[39m
          [36m>[39m
            [0m‚ÑπÔ∏è[0m
            [0m [0m
            [0minfo[0m
            [0m ([0m
            [0m1[0m
            [0m)[0m
          [36m</h4>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 rounded-md border bg-green-50 border-green-200"[39m
            [33mdata-testid[39m=[32m"suggestion-586d83a4-4915-41ac-9700-f74aaad9c5d9"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-800 mb-2"[39m
            [36m>[39m
              [0mConsiderar referir a nutricionista para manejo de dislipidemia[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mCampo: [0m
              [0mnotes[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-gray-500"[39m
            [36m>[39m
              [0mFuente: [0m
              [0mblock-290[0m
            [36m</p>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 flex space-x-2"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"[39m
              [36m>[39m
                [0mAceptar[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"[39m
              [36m>[39m
                [0mRechazar[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m4[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ __tests__/evals/AgentSuggestionsViewer.eval.test.tsx:103:21
    101|       
    102|       // Verificar que se muestran las categor√≠as correctas - usando e‚Ä¶
    103|       expect(screen.getByText(/Recomendaciones \(2\)/i)).toBeInTheDocu‚Ä¶
       |                     ^
    104|       expect(screen.getByText(/Advertencias \(1\)/i)).toBeInTheDocumen‚Ä¶
    105|       expect(screen.getByText(/Informaci√≥n \(1\)/i)).toBeInTheDocument‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/73]‚éØ

 FAIL  __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 1: Renderizado de sugerencias v√°lidas > debe mostrar el contador correcto de sugerencias
TestingLibraryElementError: Unable to find an element with the text: (content, element) => { return element?.tagName.toLowerCase() === "span" && content === "4"; } (normalized from '(content, element) => {
        return element?.tagName.toLowerCase() === "span" && content === "4";
      }'). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m4[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m4[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ __tests__/evals/AgentSuggestionsViewer.eval.test.tsx:125:21
    123|       
    124|       // Verificar que se muestra el n√∫mero total correcto, buscando p‚Ä¶
    125|       expect(screen.getByText((content, element) => {
       |                     ^
    126|         return element?.tagName.toLowerCase() === 'span' && content ==‚Ä¶
    127|       })).toBeInTheDocument();

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/73]‚éØ

 FAIL  __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 2: Manejo de arrays de sugerencias vac√≠os > debe mostrar un mensaje cuando no hay sugerencias
TestingLibraryElementError: Unable to find an element with the text: (content) => content.includes("no tiene sugerencias"). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m0[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m0[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ __tests__/evals/AgentSuggestionsViewer.eval.test.tsx:153:21
    151|       
    152|       // Verificar que se muestra el mensaje de "sin sugerencias", con‚Ä¶
    153|       expect(screen.getByText((content) => content.includes('no tiene ‚Ä¶
       |                     ^
    154|     });
    155|     

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/73]‚éØ

 FAIL  __tests__/evals/AgentSuggestionsViewer.eval.test.tsx > AgentSuggestionsViewer EVAL > Caso 2: Manejo de arrays de sugerencias vac√≠os > debe mostrar el contador en 0 cuando no hay sugerencias
TestingLibraryElementError: Unable to find an element with the text: (content, element) => { return element?.tagName.toLowerCase() === "span" && content === "0"; } (normalized from '(content, element) => {
        return element?.tagName.toLowerCase() === "span" && content === "0";
      }'). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m0[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mMostrar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m0[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ __tests__/evals/AgentSuggestionsViewer.eval.test.tsx:168:21
    166|       
    167|       // Verificar que el contador muestra 0, buscando espec√≠ficamente‚Ä¶
    168|       expect(screen.getByText((content, element) => {
       |                     ^
    169|         return element?.tagName.toLowerCase() === 'span' && content ==‚Ä¶
    170|       })).toBeInTheDocument();

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/73]‚éØ

 FAIL  __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 1: Contexto cl√≠nico v√°lido > debe generar 2-3 sugerencias con explicaciones para un contexto v√°lido
TypeError: Cannot read properties of undefined (reading 'filter')
 ‚ùØ Module.getAgentSuggestions src/core/agent/ClinicalAgent.ts:22:39
     20|   
     21|   // Filtrar bloques de tipo contextual y semantico
     22|   const contextualBlocks = ctx.blocks.filter((block: MemoryBlock) => b‚Ä¶
       |                                       ^
     23|   const semanticBlocks = ctx.blocks.filter((block: MemoryBlock) => blo‚Ä¶
     24|   
 ‚ùØ __tests__/evals/ClinicalAgent.eval.test.ts:34:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/73]‚éØ

 FAIL  __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 1: Contexto cl√≠nico v√°lido > debe referenciar correctamente los bloques de origen de las sugerencias
TypeError: Cannot read properties of undefined (reading 'filter')
 ‚ùØ Module.getAgentSuggestions src/core/agent/ClinicalAgent.ts:22:39
     20|   
     21|   // Filtrar bloques de tipo contextual y semantico
     22|   const contextualBlocks = ctx.blocks.filter((block: MemoryBlock) => b‚Ä¶
       |                                       ^
     23|   const semanticBlocks = ctx.blocks.filter((block: MemoryBlock) => blo‚Ä¶
     24|   
 ‚ùØ __tests__/evals/ClinicalAgent.eval.test.ts:66:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/73]‚éØ

 FAIL  __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 2: Contexto vac√≠o > debe generar sugerencias gen√©ricas para un contexto vac√≠o
TypeError: Cannot read properties of undefined (reading 'filter')
 ‚ùØ Module.getAgentSuggestions src/core/agent/ClinicalAgent.ts:22:39
     20|   
     21|   // Filtrar bloques de tipo contextual y semantico
     22|   const contextualBlocks = ctx.blocks.filter((block: MemoryBlock) => b‚Ä¶
       |                                       ^
     23|   const semanticBlocks = ctx.blocks.filter((block: MemoryBlock) => blo‚Ä¶
     24|   
 ‚ùØ __tests__/evals/ClinicalAgent.eval.test.ts:90:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/73]‚éØ

 FAIL  __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 3: Contexto con datos contradictorios > debe generar sugerencias relevantes incluso con informaci√≥n contradictoria
TypeError: Cannot read properties of undefined (reading 'filter')
 ‚ùØ Module.getAgentSuggestions src/core/agent/ClinicalAgent.ts:22:39
     20|   
     21|   // Filtrar bloques de tipo contextual y semantico
     22|   const contextualBlocks = ctx.blocks.filter((block: MemoryBlock) => b‚Ä¶
       |                                       ^
     23|   const semanticBlocks = ctx.blocks.filter((block: MemoryBlock) => blo‚Ä¶
     24|   
 ‚ùØ __tests__/evals/ClinicalAgent.eval.test.ts:127:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/73]‚éØ

 FAIL  __tests__/evals/ClinicalAgent.eval.test.ts > ClinicalAgent EVAL > Caso 4: Contexto de enfermedad cr√≥nica > debe generar sugerencias relevantes para el contexto de enfermedad cr√≥nica
TypeError: Cannot read properties of undefined (reading 'filter')
 ‚ùØ Module.getAgentSuggestions src/core/agent/ClinicalAgent.ts:22:39
     20|   
     21|   // Filtrar bloques de tipo contextual y semantico
     22|   const contextualBlocks = ctx.blocks.filter((block: MemoryBlock) => b‚Ä¶
       |                                       ^
     23|   const semanticBlocks = ctx.blocks.filter((block: MemoryBlock) => blo‚Ä¶
     24|   
 ‚ùØ __tests__/evals/ClinicalAgent.eval.test.ts:173:33

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/73]‚éØ

 FAIL  src/__tests__/Layout.test.tsx > Layout Component > renderiza correctamente con usuario autenticado
Error: [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ src/__tests__/Layout.test.tsx:49:8
     47|   it('renderiza correctamente con usuario autenticado', () => {
     48|     render(
     49|       <BrowserRouter>
       |        ^
     50|         <Layout />
     51|       </BrowserRouter>

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/73]‚éØ

 FAIL  src/__tests__/Layout.test.tsx > Layout Component > muestra el men√∫ de navegaci√≥n con las opciones correctas
Error: [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ src/__tests__/Layout.test.tsx:66:8
     64|   it('muestra el men√∫ de navegaci√≥n con las opciones correctas', () =>‚Ä¶
     65|     render(
     66|       <BrowserRouter>
       |        ^
     67|         <Layout />
     68|       </BrowserRouter>

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/73]‚éØ

 FAIL  src/__tests__/Layout.test.tsx > Layout Component > contiene un bot√≥n de logout
Error: [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ src/__tests__/Layout.test.tsx:78:8
     76|   it('contiene un bot√≥n de logout', () => {
     77|     render(
     78|       <BrowserRouter>
       |        ^
     79|         <Layout />
     80|       </BrowserRouter>

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/73]‚éØ

 FAIL  src/__tests__/Layout.test.tsx > Layout Component > muestra pantalla de carga cuando loading es true
Error: [vitest] No "BrowserRouter" export is defined on the "react-router-dom" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("react-router-dom", async () => {
  const actual = await vi.importActual("react-router-dom")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ src/__tests__/Layout.test.tsx:100:8
     98| 
     99|     render(
    100|       <BrowserRouter>
       |        ^
    101|         <Layout />
    102|       </BrowserRouter>

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/73]‚éØ

 FAIL  src/__tests__/LoginPage.test.tsx > LoginPage Component > muestra error cuando los campos est√°n vac√≠os
TestingLibraryElementError: Unable to find an accessible element with the role "form"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Iniciar sesi√≥n":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Credenciales de demostraci√≥n:":
  [36m<h3[39m
    [33mclass[39m=[32m"text-sm font-medium text-slateBlue mb-2"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Iniciar sesi√≥n":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Reg√≠strate":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/register"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mIniciar sesi√≥n[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mAccede a tu cuenta para gestionar pacientes y consultas[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"current-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mIniciar sesi√≥n[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øNo tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/register"[39m
            [36m>[39m
              [0mReg√≠strate[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mt-8 p-4 border border-gray-200 rounded-md bg-gray-50"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-sm font-medium text-slateBlue mb-2"[39m
          [36m>[39m
            [0mCredenciales de demostraci√≥n:[0m
          [36m</h3>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
          [36m>[39m
            [0mProfesional: demo@aiduxcare.com / password123[0m
          [36m</p>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70 mb-1"[39m
          [36m>[39m
            [0mPaciente: paciente@aiduxcare.com / password123[0m
          [36m</p>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-xs text-slateBlue/70"[39m
          [36m>[39m
            [0mAdmin: admin@aiduxcare.com / password123[0m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/__tests__/LoginPage.test.tsx:64:25
     62|     );
     63| 
     64|     const form = screen.getByRole('form');
       |                         ^
     65|     fireEvent.submit(form);
     66| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/73]‚éØ

 FAIL  src/__tests__/RegisterPage.test.tsx > RegisterPage Component > renderiza el formulario de registro correctamente
TestingLibraryElementError: Unable to find an accessible element with the role "heading" and name "Reg√≠strate"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Registro":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Nombre completo":
  [36m<input[39m
    [33mautocomplete[39m=[32m"name"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"fullname"[39m
    [33mname[39m=[32m"fullname"[39m
    [33mplaceholder[39m=[32m"Nombre completo"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "Tipo de cuenta":
  [36m<select[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"role"[39m
    [33mname[39m=[32m"role"[39m
  [36m/>[39m

  --------------------------------------------------
  option:

  Name "Paciente":
  [36m<option[39m
    [33mvalue[39m=[32m"patient"[39m
  [36m/>[39m

  Name "Profesional sanitario":
  [36m<option[39m
    [33mvalue[39m=[32m"professional"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Registrarme":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Inicia sesi√≥n":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/login"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mRegistro[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mCrea una cuenta para acceder al sistema[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"fullname"[39m
              [36m>[39m
                [0mNombre completo[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"name"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"fullname"[39m
                [33mname[39m=[32m"fullname"[39m
                [33mplaceholder[39m=[32m"Nombre completo"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"new-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slateBlue mb-1"[39m
                [33mfor[39m=[32m"role"[39m
              [36m>[39m
                [0mTipo de cuenta[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"role"[39m
                [33mname[39m=[32m"role"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"patient"[39m
                [36m>[39m
                  [0mPaciente[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"professional"[39m
                [36m>[39m
                  [0mProfesional sanitario[0m
                [36m</option>[39m
              [36m</select>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
              [36m>[39m
                [0mNota: Las cuentas de administrador solo pueden ser creadas por el administrador del sistema.[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mRegistrarme[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øYa tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mInicia sesi√≥n[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/__tests__/RegisterPage.test.tsx:40:19
     38|     );
     39| 
     40|     expect(screen.getByRole('heading', { name: 'Reg√≠strate' })).toBeIn‚Ä¶
       |                   ^
     41|     expect(screen.getByPlaceholderText('Correo electr√≥nico')).toBeInTh‚Ä¶
     42|     expect(screen.getByPlaceholderText('Nombre completo')).toBeInTheDo‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/73]‚éØ

 FAIL  src/__tests__/RegisterPage.test.tsx > RegisterPage Component > muestra errores de validaci√≥n cuando faltan campos
TestingLibraryElementError: Unable to find an accessible element with the role "form"

Here are the accessible roles:

  heading:

  Name "AiDuxCare":
  [36m<h1[39m
    [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  Name "Registro":
  [36m<h2[39m
    [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
  [36m/>[39m

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Nombre completo":
  [36m<input[39m
    [33mautocomplete[39m=[32m"name"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"fullname"[39m
    [33mname[39m=[32m"fullname"[39m
    [33mplaceholder[39m=[32m"Nombre completo"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"text"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  Name "Correo electr√≥nico":
  [36m<input[39m
    [33mautocomplete[39m=[32m"email"[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"email-address"[39m
    [33mname[39m=[32m"email"[39m
    [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
    [33mrequired[39m=[32m""[39m
    [33mtype[39m=[32m"email"[39m
    [33mvalue[39m=[32m""[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "Tipo de cuenta":
  [36m<select[39m
    [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
    [33mid[39m=[32m"role"[39m
    [33mname[39m=[32m"role"[39m
  [36m/>[39m

  --------------------------------------------------
  option:

  Name "Paciente":
  [36m<option[39m
    [33mvalue[39m=[32m"patient"[39m
  [36m/>[39m

  Name "Profesional sanitario":
  [36m<option[39m
    [33mvalue[39m=[32m"professional"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "Registrarme":
  [36m<button[39m
    [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
    [33mtype[39m=[32m"submit"[39m
  [36m/>[39m

  --------------------------------------------------
  link:

  Name "Inicia sesi√≥n":
  [36m<a[39m
    [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
    [33mhref[39m=[32m"/login"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-boneWhite px-4 sm:px-6 lg:px-8 font-sans"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mAiDuxCare[0m
          [36m</h1>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"mt-6 text-2xl font-bold tracking-tight text-slateBlue"[39m
          [36m>[39m
            [0mRegistro[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0mCrea una cuenta para acceder al sistema[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-4 rounded-md shadow-sm"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"fullname"[39m
              [36m>[39m
                [0mNombre completo[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"name"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"fullname"[39m
                [33mname[39m=[32m"fullname"[39m
                [33mplaceholder[39m=[32m"Nombre completo"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"email-address"[39m
              [36m>[39m
                [0mCorreo electr√≥nico[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"email"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"email-address"[39m
                [33mname[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Correo electr√≥nico"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"sr-only"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mContrase√±a[0m
              [36m</label>[39m
              [36m<input[39m
                [33mautocomplete[39m=[32m"new-password"[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue placeholder:text-neutralGray focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"password"[39m
                [33mname[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Contrase√±a"[39m
                [33mrequired[39m=[32m""[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slateBlue mb-1"[39m
                [33mfor[39m=[32m"role"[39m
              [36m>[39m
                [0mTipo de cuenta[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"relative block w-full rounded-md border border-neutralGray p-3 text-slateBlue focus:ring-2 focus:ring-intersectionGreen focus:border-intersectionGreen sm:text-sm"[39m
                [33mid[39m=[32m"role"[39m
                [33mname[39m=[32m"role"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"patient"[39m
                [36m>[39m
                  [0mPaciente[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"professional"[39m
                [36m>[39m
                  [0mProfesional sanitario[0m
                [36m</option>[39m
              [36m</select>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-xs text-slateBlue/70"[39m
              [36m>[39m
                [0mNota: Las cuentas de administrador solo pueden ser creadas por el administrador del sistema.[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"group relative flex w-full justify-center rounded-md bg-softCoral px-3 py-3 text-sm font-semibold text-white hover:bg-intersectionGreen focus:outline-none focus:ring-2 focus:ring-intersectionGreen focus:ring-offset-2 transition-colors "[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mRegistrarme[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mt-4"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-slateBlue/70"[39m
          [36m>[39m
            [0m¬øYa tienes cuenta?[0m
            [0m [0m
            [36m<a[39m
              [33mclass[39m=[32m"font-medium text-softCoral hover:text-intersectionGreen transition-colors"[39m
              [33mhref[39m=[32m"/login"[39m
            [36m>[39m
              [0mInicia sesi√≥n[0m
            [36m</a>[39m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/__tests__/RegisterPage.test.tsx:53:29
     51|       </BrowserRouter>
     52|     );
     53|     fireEvent.submit(screen.getByRole('form'));
       |                             ^
     54| 
     55|     await waitFor(() => {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/73]‚éØ

 FAIL  __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe generar un AgentContext v√°lido a partir de un MCPContext
AssertionError: expected undefined to be 'visit-123' // Object.is equality
 ‚ùØ __tests__/core/agent/AgentContextBuilder.test.ts:72:34
     70|     // Verificar estructura b√°sica
     71|     expect(agentContext).toBeDefined();
     72|     expect(agentContext.visitId).toBe('visit-123');
       |                                  ^
     73|     expect(agentContext.patientId).toBe('patient-456');
     74|     expect(Array.isArray(agentContext.blocks)).toBe(true);

  - Expected   "visit-123"
  + Received   "undefined"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/73]‚éØ

 FAIL  __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe excluir bloques vac√≠os o sin ID
TypeError: Cannot read properties of undefined (reading 'every')
 ‚ùØ __tests__/core/agent/AgentContextBuilder.test.ts:96:32
     94|     
     95|     // Verificar que no hay bloques sin ID ni contenido vac√≠o
     96|     expect(agentContext.blocks.every(b => b.id && b.content)).toBe(tru‚Ä¶
       |                                ^
     97|     
     98|     // Verificar que se excluyeron espec√≠ficamente bloques problem√°tic‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/73]‚éØ

 FAIL  __tests__/core/agent/AgentContextBuilder.test.ts > AgentContextBuilder > debe manejar valores por defecto cuando no hay datos
AssertionError: expected undefined to be '' // Object.is equality
 ‚ùØ __tests__/core/agent/AgentContextBuilder.test.ts:115:34
    113|     
    114|     // Verificar valores por defecto
    115|     expect(agentContext.visitId).toBe('');
       |                                  ^
    116|     expect(agentContext.patientId).toBe('');
    117|     expect(agentContext.blocks).toEqual([]);

  - Expected   ""
  + Received   "undefined"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/73]‚éØ

 FAIL  __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a devolver un array con al menos 2 sugerencias v√°lidas
TypeError: executeAgent is not a function
 ‚ùØ __tests__/core/agent/AgentExecutor.test.ts:57:29
     55| 
     56|   it('deber√≠a devolver un array con al menos 2 sugerencias v√°lidas', a‚Ä¶
     57|     const responsePromise = executeAgent(mockParams);
       |                             ^
     58|     
     59|     // Avanzar el tiempo simulado para resolver el setTimeout en sendT‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/73]‚éØ

 FAIL  __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a generar un prompt que contenga fragmentos del contexto original
TypeError: executeAgent is not a function
 ‚ùØ __tests__/core/agent/AgentExecutor.test.ts:83:11
     81| 
     82|   it('deber√≠a generar un prompt que contenga fragmentos del contexto o‚Ä¶
     83|     await executeAgent(mockParams);
       |           ^
     84|     
     85|     // Avanzar el tiempo simulado

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/73]‚éØ

 FAIL  __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a incluir sourceBlockId v√°lido en las sugerencias
TypeError: executeAgent is not a function
 ‚ùØ __tests__/core/agent/AgentExecutor.test.ts:100:29
     98| 
     99|   it('deber√≠a incluir sourceBlockId v√°lido en las sugerencias', async ‚Ä¶
    100|     const responsePromise = executeAgent(mockParams);
       |                             ^
    101|     
    102|     // Avanzar el tiempo simulado

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/73]‚éØ

 FAIL  __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > no deber√≠a lanzar errores si el contexto est√° parcialmente vac√≠o
TypeError: executeAgent is not a function
 ‚ùØ __tests__/core/agent/AgentExecutor.test.ts:130:29
    128|     
    129|     // No deber√≠a lanzar errores
    130|     const responsePromise = executeAgent(minimalParams);
       |                             ^
    131|     
    132|     // Avanzar el tiempo simulado

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/73]‚éØ

 FAIL  __tests__/core/agent/AgentExecutor.test.ts > AgentExecutor > deber√≠a utilizar diferentes LLMProviders seg√∫n se especifique
TypeError: executeAgent is not a function
 ‚ùØ __tests__/core/agent/AgentExecutor.test.ts:155:31
    153|       vi.mocked(LLMAdapter.sendToLLM).mockClear();
    154|       
    155|       const responsePromise = executeAgent(params);
       |                               ^
    156|       
    157|       // Avanzar el tiempo simulado

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor OpenAI
TypeError: Cannot read properties of undefined (reading '0')
 ‚ùØ Module.sendToLLM src/core/agent/LLMAdapter.ts:37:32
     35|         field: 'diagnosis',
     36|         content: 'Considerar diagn√≥stico de hipertensi√≥n arterial',
     37|         sourceBlockId: context.blocks[0]?.id || 'default',
       |                                ^
     38|         createdAt: new Date(),
     39|         updatedAt: new Date()
 ‚ùØ __tests__/core/agent/LLMAdapter.test.ts:16:29

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Anthropic
TypeError: Cannot read properties of undefined (reading '0')
 ‚ùØ Module.sendToLLM src/core/agent/LLMAdapter.ts:37:32
     35|         field: 'diagnosis',
     36|         content: 'Considerar diagn√≥stico de hipertensi√≥n arterial',
     37|         sourceBlockId: context.blocks[0]?.id || 'default',
       |                                ^
     38|         createdAt: new Date(),
     39|         updatedAt: new Date()
 ‚ùØ __tests__/core/agent/LLMAdapter.test.ts:32:29

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Mistral
TypeError: Cannot read properties of undefined (reading '0')
 ‚ùØ Module.sendToLLM src/core/agent/LLMAdapter.ts:37:32
     35|         field: 'diagnosis',
     36|         content: 'Considerar diagn√≥stico de hipertensi√≥n arterial',
     37|         sourceBlockId: context.blocks[0]?.id || 'default',
       |                                ^
     38|         createdAt: new Date(),
     39|         updatedAt: new Date()
 ‚ùØ __tests__/core/agent/LLMAdapter.test.ts:47:29

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a devolver una respuesta para el proveedor Custom
TypeError: Cannot read properties of undefined (reading '0')
 ‚ùØ Module.sendToLLM src/core/agent/LLMAdapter.ts:37:32
     35|         field: 'diagnosis',
     36|         content: 'Considerar diagn√≥stico de hipertensi√≥n arterial',
     37|         sourceBlockId: context.blocks[0]?.id || 'default',
       |                                ^
     38|         createdAt: new Date(),
     39|         updatedAt: new Date()
 ‚ùØ __tests__/core/agent/LLMAdapter.test.ts:62:29

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a rechazar la promesa con un error si el proveedor no es soportado
AssertionError: expected [Function] to throw error including 'Unsupported LLM provider' but got 'Cannot read properties of undefined (‚Ä¶'
  - Expected   "Unsupported LLM provider"
  + Received   "Cannot read properties of undefined (reading '0')"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/73]‚éØ

 FAIL  __tests__/core/agent/LLMAdapter.test.ts > LLMAdapter > deber√≠a demorar aproximadamente 500ms en devolver la respuesta
TypeError: Cannot read properties of undefined (reading '0')
 ‚ùØ Module.sendToLLM src/core/agent/LLMAdapter.ts:37:32
     35|         field: 'diagnosis',
     36|         content: 'Considerar diagn√≥stico de hipertensi√≥n arterial',
     37|         sourceBlockId: context.blocks[0]?.id || 'default',
       |                                ^
     38|         createdAt: new Date(),
     39|         updatedAt: new Date()
 ‚ùØ __tests__/core/agent/LLMAdapter.test.ts:88:29

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:125:20

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:142:20

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:160:20

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:175:20

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:192:20

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:200:5

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/73]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
Error: [vitest] No "AgentExecutor" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:20:28
     18| 
     19|     // Crear y ejecutar el agente
     20|     const executor = await AgentExecutor.create(visitId, 'openai');
       |                            ^
     21|     const suggestions = await executor.execute();
     22| 
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:214:5

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/73]‚éØ

 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > no muestra diferencias cuando tienen id√©ntico contenido
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques agregados con el estilo correcto
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques modificados con el estilo correcto
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra bloques sin cambios con el estilo correcto
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > muestra correctamente m√∫ltiples tipos de bloques
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > soporta expansi√≥n y colapso de grupos
 FAIL  __tests__/shared/components/AgentContextDiffViewer.test.tsx > AgentContextDiffViewer > usa atributos de accesibilidad correctos
TypeError: Cannot read properties of undefined (reading 'map')
 ‚ùØ AgentContextDiffViewer src/shared/components/Agent/AgentContextDiffViewer.tsx:17:14
     15|   return (
     16|     <div className="space-y-4">
     17|       {diffs.map((diff) => (
       |              ^
     18|         <div
     19|           key={diff.id}
 ‚ùØ renderWithHooks node_modules/react-dom/cjs/react-dom.development.js:15486:18
 ‚ùØ mountIndeterminateComponent node_modules/react-dom/cjs/react-dom.development.js:20103:13
 ‚ùØ beginWork node_modules/react-dom/cjs/react-dom.development.js:21626:16
 ‚ùØ beginWork$1 node_modules/react-dom/cjs/react-dom.development.js:27465:14
 ‚ùØ performUnitOfWork node_modules/react-dom/cjs/react-dom.development.js:26599:12
 ‚ùØ workLoopSync node_modules/react-dom/cjs/react-dom.development.js:26505:5
 ‚ùØ renderRootSync node_modules/react-dom/cjs/react-dom.development.js:26473:7
 ‚ùØ recoverFromConcurrentError node_modules/react-dom/cjs/react-dom.development.js:25889:20
 ‚ùØ performConcurrentWorkOnRoot node_modules/react-dom/cjs/react-dom.development.js:25789:22

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/73]‚éØ

 FAIL  src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe integrar una sugerencia en un campo vac√≠o
Error: La visita test-visit-1 no existe
 ‚ùØ Function.integrateSuggestion src/core/agent/SuggestionIntegrationService.ts:58:15
     56| 
     57|       if (visitError || !visit) {
     58|         throw new Error(`La visita ${visitId} no existe`);
       |               ^
     59|       }
     60| 
 ‚ùØ src/__tests__/agent/SuggestionIntegrationService.test.ts:63:7

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/73]‚éØ

 FAIL  src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe agregar una sugerencia a un campo existente con prefijo
TypeError: default.from(...).select(...).eq(...).eq is not a function
 ‚ùØ Function.integrateSuggestion src/core/agent/SuggestionIntegrationService.ts:66:10
     64|         .select('*')
     65|         .eq('visit_id', visitId)
     66|         .eq('field_name', suggestion.field)
       |          ^
     67|         .single();
     68| 
 ‚ùØ src/__tests__/agent/SuggestionIntegrationService.test.ts:103:7

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[49/73]‚éØ

 FAIL  src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si la visita no existe
AssertionError: expected [Function] to throw error including 'La visita test-visit-1 no existe' but got 'default.from(..‚Ä¶'
  - Expected   "La visita test-visit-1 no existe"
  + Received   "__vite_ssr_import_1__.default.from(...).insert is not a function"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[50/73]‚éØ

 FAIL  src/__tests__/agent/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > integrateSuggestion > debe lanzar error si hay un problema al obtener el campo
AssertionError: expected [Function] to throw error including 'Error al obtener el campo: Database e‚Ä¶' but got 'default.from(..‚Ä¶'
  - Expected   "Error al obtener el campo: Database error"
  + Received   "__vite_ssr_import_1__.default.from(...).insert is not a function"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[51/73]‚éØ

 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getContextualMemory > retorna memoria contextual
AssertionError: expected [] to deeply equal [ { id: '1', ‚Ä¶(4) } ]
 ‚ùØ src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts:83:22
     81| 
     82|       const result = await getContextualMemory(visitId);
     83|       expect(result).toEqual(mockResp.data);
       |                      ^
     84|     });
     85| 

  - Expected  - 9
  + Received  + 1

  - Array [
  -   Object {
  -     "content": "Test content",
  -     "created_at": "2024-01-01T00:00:00Z",
  -     "id": "1",
  -     "type": "contextual",
  -     "visit_id": "visit-123",
  -   },
  - ]"
  + "Array []

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[52/73]‚éØ

 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getContextualMemory > lanza error cuando Supabase regresa error
 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getPersistentMemory > lanza error en caso de fallo
 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getSemanticMemory > lanza error cuando falla
Error: promise resolved "" instead of rejecting
‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[53/73]‚éØ

 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getPersistentMemory > retorna memoria persistente
AssertionError: expected [] to deeply equal [ { id: '2', ‚Ä¶(4) } ]
 ‚ùØ src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts:113:22
    111| 
    112|       const result = await getPersistentMemory(patientId);
    113|       expect(result).toEqual(mockResp.data);
       |                      ^
    114|     });
    115| 

  - Expected  - 9
  + Received  + 1

  - Array [
  -   Object {
  -     "content": "Persisted data",
  -     "created_at": "2024-02-02T00:00:00Z",
  -     "id": "2",
  -     "patient_id": "patient-456",
  -     "type": "persistent",
  -   },
  - ]"
  + "Array []

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[54/73]‚éØ

 FAIL  src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts > MCPDataSourceSupabase > getSemanticMemory > retorna memoria sem√°ntica
AssertionError: expected [] to deeply equal [ { id: '3', ‚Ä¶(3) } ]
 ‚ùØ src/__tests__/core/mcp/MCPDataSourceSupabase.test.ts:141:22
    139| 
    140|       const result = await getSemanticMemory();
    141|       expect(result).toEqual(mockResp.data);
       |                      ^
    142|     });
    143| 

  - Expected  - 8
  + Received  + 1

  - Array [
  -   Object {
  -     "content": "Semantic info",
  -     "created_at": "2024-03-03T00:00:00Z",
  -     "id": "3",
  -     "type": "semantic",
  -   },
  - ]"
  + "Array []

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[55/73]‚éØ

 FAIL  src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe lanzar un error si la visita no existe
AssertionError: expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      Object {
        "integrated_at": "2025-05-22T13:56:54.529Z",
        "suggestion_id": "suggestion-789",
        "user_id": "user-456",
        "visit_id": "visit-123",
      },
    ]


Number of calls: 1

 ‚ùØ src/core/services/__tests__/SuggestionIntegrationService.test.ts:168:28
    166|     
    167|     // Verificar que no se insert√≥ nada en las otras tablas
    168|     expect(mockInsert).not.toHaveBeenCalled();
       |                            ^
    169|     expect(mockUpsert).not.toHaveBeenCalled();
    170|   });

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[56/73]‚éØ

 FAIL  src/core/services/__tests__/SuggestionIntegrationService.test.ts > SuggestionIntegrationService > debe manejar errores en la inserci√≥n de integrated_suggestions
AssertionError: expected [Function] to throw error including 'Error al registrar la integraci√≥n de ‚Ä¶' but got 'Error en la inserci√≥n de datos'
 ‚ùØ src/core/services/__tests__/SuggestionIntegrationService.test.ts:179:5
    177| 
    178|     // Verificar que se lanza el error adecuado
    179|     await expect(SuggestionIntegrationService.integrateSuggestion(sugg‚Ä¶
       |     ^
    180|       .rejects.toThrow('Error al registrar la integraci√≥n de la sugere‚Ä¶
    181|     

  - Expected   "Error al registrar la integraci√≥n de la sugerencia: Error en la inserci√≥n ‚Ä¶
  + Received   "Error en la inserci√≥n de datos"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[57/73]‚éØ

 FAIL  src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Manejo de feedback > maneja correctamente el rechazo de una sugerencia
AssertionError: expected "spy" to be called with arguments: [ 'suggestion_rejected', ‚Ä¶(1) ]

Received: 


Number of calls: 0

 ‚ùØ src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx:309:31
    307| 
    308|       expect(onSuggestionRejected).toHaveBeenCalledWith(mockSuggestion‚Ä¶
    309|       expect(AuditLogger.log).toHaveBeenCalledWith(
       |                               ^
    310|         'suggestion_rejected',
    311|         expect.objectContaining({

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[58/73]‚éØ

 FAIL  src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Manejo de feedback > registra m√©tricas de uso al rechazar sugerencias
AssertionError: expected "spy" to be called with arguments: [ 'suggestions_rejected', ‚Ä¶(4) ]

Received: 


Number of calls: 0

 ‚ùØ src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx:335:49
    333|       fireEvent.click(screen.getByTestId('reject-suggestion-1'));
    334| 
    335|       expect(UsageAnalyticsService.trackMetric).toHaveBeenCalledWith(
       |                                                 ^
    336|         'suggestions_rejected',
    337|         userId,

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[59/73]‚éØ

 FAIL  src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx > AgentSuggestionsViewer > Validaci√≥n de tipos de sugerencia > maneja correctamente sugerencias con tipos inv√°lidos
TestingLibraryElementError: Unable to find an element by: [data-testid="info-section"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-white rounded-lg shadow-sm p-4"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900"[39m
        [36m>[39m
          [0mSugerencias del Copiloto ([0m
          [0m1[0m
          [0m)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"text-sm text-blue-600 hover:text-blue-800"[39m
          [33mdata-testid[39m=[32m"toggle-suggestions"[39m
        [36m>[39m
          [0mOcultar[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-6"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"mt-4 text-right"[39m
      [36m>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-xs text-gray-500"[39m
        [36m>[39m
          [0mTotal de sugerencias: [0m
          [0m1[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/shared/components/Agent/__tests__/AgentSuggestionsViewer.test.tsx:368:21
    366|       
    367|       // Deber√≠a mostrar la sugerencia en la secci√≥n de notas por defe‚Ä¶
    368|       expect(screen.getByTestId('info-section')).toBeInTheDocument();
       |                     ^
    369|       expect(screen.getByText(/Considerar radiograf√≠a de t√≥rax/i)).toB‚Ä¶
    370|     });

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[60/73]‚éØ

 FAIL  src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx > MCPContextViewer > llama a onSave cuando se confirman los cambios
AssertionError: expected "spy" to be called with arguments: [ { contextual: { ‚Ä¶(2) }, ‚Ä¶(2) } ]

Received: 


Number of calls: 0

 ‚ùØ src/shared/components/MCP/__tests__/MCPContextViewer.test.tsx:161:20
    159| 
    160|     // Verificar que se llam√≥ a onSave con los datos correctos
    161|     expect(onSave).toHaveBeenCalledWith({
       |                    ^
    162|       ...mockContext,
    163|       contextual: {

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[61/73]‚éØ

 FAIL  src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > expande y muestra los logs cuando se hace clic en el bot√≥n
TestingLibraryElementError: Unable to find an element with the text: /Transcripci√≥n de Audio/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx:105:19
    103|     expect(screen.getByText(/Actualizaci√≥n MCP/i)).toBeInTheDocument();
    104|     expect(screen.getByText(/Integraci√≥n de Sugerencia/i)).toBeInTheDo‚Ä¶
    105|     expect(screen.getByText(/Transcripci√≥n de Audio/i)).toBeInTheDocum‚Ä¶
       |                   ^
    106|   });
    107| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[62/73]‚éØ

 FAIL  src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > muestra los detalles correctos para cada tipo de log
TestingLibraryElementError: Unable to find an element with the text: /Tipo de Bloque: Memoria Contextual/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx:120:19
    118| 
    119|     // Verificar detalles de MCP update
    120|     expect(screen.getByText(/Tipo de Bloque: Memoria Contextual/i)).to‚Ä¶
       |                   ^
    121|     expect(screen.getByText(/Contenido de prueba para bloque contextua‚Ä¶
    122| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[63/73]‚éØ

 FAIL  src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > formatea correctamente las fechas y horas
TestingLibraryElementError: Unable to find an element with the text: /20\/03\/2024, 10:00:00/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx:158:19
    156| 
    157|     // Verificar que las fechas se muestran en el formato correcto
    158|     expect(screen.getByText(/20\/03\/2024, 10:00:00/i)).toBeInTheDocum‚Ä¶
       |                   ^
    159|     expect(screen.getByText(/20\/03\/2024, 10:05:00/i)).toBeInTheDocum‚Ä¶
    160|     expect(screen.getByText(/20\/03\/2024, 10:10:00/i)).toBeInTheDocum‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[64/73]‚éØ

 FAIL  src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx > AuditLogViewer > muestra las etiquetas de fuente con los colores correctos
TestingLibraryElementError: Unable to find an element with the text: Audio. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"mt-8 border rounded-md border-gray-200 bg-white shadow-sm"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-800"[39m
        [36m>[39m
          [0mHistorial de Actividad Cl√≠nica [0m
          [0m(Local)[0m
        [36m</h3>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 text-sm font-medium rounded-md bg-blue-50 text-blue-700 hover:bg-blue-100"[39m
          [33mdata-testid[39m=[32m"toggle-audit-logs"[39m
        [36m>[39m
          [0mOcultar historial[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-0"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mActualizaci√≥n MCP[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"[39m
                [36m>[39m
                  [0mIA[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:00:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mTipo de Bloque:[0m
                [36m</span>[39m
                [0m [0m
                [0mMemoria Contextual[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mContenido de prueba para bloque contextual[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"border rounded-md p-3 hover:bg-gray-50"[39m
            [33mdata-testid[39m=[32m"audit-log-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                [36m>[39m
                  [0mIntegraci√≥n de Sugerencia[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800"[39m
                [36m>[39m
                  [0mManual[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs text-gray-500"[39m
              [36m>[39m
                [0m20/03/2024, 11:05:00[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mt-2 text-sm"[39m
            [36m>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mSecci√≥n:[0m
                [36m</span>[39m
                [0m [0m
                [0mplan[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-gray-600"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"font-medium"[39m
                [36m>[39m
                  [0mContenido:[0m
                [36m</span>[39m
                [0m [0m
                [0mSugerencia integrada en el plan[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/shared/components/Audit/__tests__/AuditLogViewer.test.tsx:177:31
    175|     const iaBadge = screen.getByText('IA');
    176|     const manualBadge = screen.getByText('Manual');
    177|     const audioBadge = screen.getByText('Audio');
       |                               ^
    178| 
    179|     expect(iaBadge).toHaveClass('bg-blue-100', 'text-blue-800');

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[65/73]‚éØ

 Test Files  25 failed | 16 passed (41)
      Tests  65 failed | 110 passed | 9 skipped (184)
   Start at  15:56:51
   Duration  8.35s (transform 607ms, setup 3.58s, collect 2.22s, tests 2.02s)


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c
 RERUN  __tests__/core/agent/runClinicalAgent.test.ts x1

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
   ‚Üí Cannot read properties of undefined (reading 'length')
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
   ‚Üí expected [] to have property "suggestions"
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
   ‚Üí expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      null,
    ]


Number of calls: 1

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})


‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 7 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:120:26
    118|     // Verificar que se llamaron correctamente las funciones
    119|     expect(AgentContextBuilder.buildAgentContext).toHaveBeenCalledWith‚Ä¶
    120|     expect(AgentExecutor.executeAgent).toHaveBeenCalled();
       |                          ^
    121|     
    122|     // Verificar el resultado

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
TypeError: Cannot read properties of undefined (reading 'length')
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:136:31
    134|     
    135|     // Verificar que hay al menos 2 sugerencias
    136|     expect(result.suggestions.length).toBeGreaterThanOrEqual(2);
       |                               ^
    137|     
    138|     // Verificar que cada sugerencia tiene la estructura correcta

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
AssertionError: expected [] to have property "suggestions"
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:157:20
    155|     
    156|     // Verificar que se devolvi√≥ un resultado v√°lido
    157|     expect(result).toHaveProperty('suggestions');
       |                    ^
    158|     expect(Array.isArray(result.suggestions)).toBe(true);
    159|   });

Could not display diff. It's possible objects are too large to compare.
Try increasing --outputDiffMaxSize option.

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
AssertionError: expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      null,
    ]


Number of calls: 1

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:166:55
    164|     
    165|     // Verificar que no se llam√≥ a buildAgentContext
    166|     expect(AgentContextBuilder.buildAgentContext).not.toHaveBeenCalled‚Ä¶
       |                                                       ^
    167|     
    168|     // Verificar que se devolvi√≥ un array vac√≠o de sugerencias

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:175:29
    173|   it('deber√≠a manejar errores internos sin lanzar excepciones', async ‚Ä¶
    174|     // Simular un error en executeAgent
    175|     vi.mocked(AgentExecutor.executeAgent).mockRejectedValueOnce(
       |                             ^
    176|       new Error('Error simulado en executeAgent')
    177|     );

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:194:26
    192|     
    193|     // Verificar que se llam√≥ a executeAgent con el provider correcto
    194|     expect(AgentExecutor.executeAgent).toHaveBeenCalledWith(
       |                          ^
    195|       expect.objectContaining({
    196|         provider: 'openai'

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/7]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:208:26
    206|     
    207|     // Verificar que se llam√≥ a executeAgent con el provider correcto
    208|     expect(AgentExecutor.executeAgent).toHaveBeenCalledWith(
       |                          ^
    209|       expect.objectContaining({
    210|         provider: 'anthropic'

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/7]‚éØ

 Test Files  1 failed (1)
      Tests  7 failed (7)
   Start at  16:04:15
   Duration  446ms


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
       rerun x1
[2K[1A[2K[Gc
 RERUN  __tests__/core/agent/runClinicalAgent.test.ts x2

 ‚úì __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
   ‚Üí expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      null,
    ]


Number of calls: 1

 ‚úì __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
   ‚Üí expected 0 to be greater than or equal to 2
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})


‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 5 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
AssertionError: expected "spy" to not be called at all

Received: 
    1st spy call:

    Array [
      null,
    ]


Number of calls: 1

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:122:55
    120|     // @ts-expect-error: Pasar null intencionalmente para probar el ma‚Ä¶
    121|     const result = await runClinicalAgent(null);
    122|     expect(AgentContextBuilder.buildAgentContext).not.toHaveBeenCalled‚Ä¶
       |                                                       ^
    123|     expect(result).toEqual([]);
    124|   });

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/5]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
AssertionError: expected 0 to be greater than or equal to 2
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:140:27
    138|     
    139|     // Verificar que hay al menos 2 sugerencias
    140|     expect(result.length).toBeGreaterThanOrEqual(2);
       |                           ^
    141|     
    142|     // Verificar que cada sugerencia tiene la estructura correcta

  - Expected   "0"
  + Received   "2"

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/5]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:153:29
    151|   it('deber√≠a manejar errores internos sin lanzar excepciones', async ‚Ä¶
    152|     // Simular un error en executeAgent
    153|     vi.mocked(AgentExecutor.executeAgent).mockRejectedValueOnce(
       |                             ^
    154|       new Error('Error simulado en executeAgent')
    155|     );

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/5]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:171:26
    169|     
    170|     // Verificar que se llam√≥ a executeAgent con el provider correcto
    171|     expect(AgentExecutor.executeAgent).toHaveBeenCalledWith(
       |                          ^
    172|       expect.objectContaining({
    173|         provider: 'openai'

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/5]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:185:26
    183|     
    184|     // Verificar que se llam√≥ a executeAgent con el provider correcto
    185|     expect(AgentExecutor.executeAgent).toHaveBeenCalledWith(
       |                          ^
    186|       expect.objectContaining({
    187|         provider: 'anthropic'

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/5]‚éØ

 Test Files  1 failed (1)
      Tests  5 failed | 2 passed (7)
   Start at  16:06:22
   Duration  383ms


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
       rerun x2
[2K[1A[2K[Gc
 RERUN  __tests__/core/agent/runClinicalAgent.test.ts x3

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
Error al ejecutar el agente cl√≠nico: TypeError: Cannot read properties of undefined (reading 'data')
    at Proxy.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:4:47[90m)[39m
    at Proxy.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Proxy.spy [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:17:32[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:113:26
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
Error al ejecutar el agente cl√≠nico: TypeError: Cannot read properties of undefined (reading 'data')
    at Proxy.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:4:47[90m)[39m
    at Proxy.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Proxy.spy [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:17:32[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:125:26
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
Error al ejecutar el agente cl√≠nico: TypeError: Cannot read properties of undefined (reading 'data')
    at Proxy.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:4:47[90m)[39m
    at Proxy.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Proxy.spy [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:17:32[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:131:26
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
Error al ejecutar el agente cl√≠nico: TypeError: Cannot read properties of undefined (reading 'data')
    at Proxy.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:4:47[90m)[39m
    at Proxy.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Proxy.spy [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:17:32[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:162:11
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m

stderr | __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
Error al ejecutar el agente cl√≠nico: TypeError: Cannot read properties of undefined (reading 'data')
    at Proxy.<anonymous> [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:4:47[90m)[39m
    at Proxy.<anonymous> [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mvitest[24m/node_modules/[4m@vitest[24m/spy/dist/index.js:112:17[90m)[39m
    at Proxy.spy [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4mtinyspy[24m/dist/index.js:30:20[90m)[39m
    at Module.runClinicalAgent [90m(/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39msrc/core/agent/runClinicalAgent.ts:17:32[90m)[39m
    at [90m/Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39m__tests__/core/agent/runClinicalAgent.test.ts:176:11
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:131:13
    at [90mfile:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:40:26
    at runTest [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:444:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m
    at runSuite [90m(file:///Users/mauriciosobarzo/Desktop/AIDUXCARE-V.2/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:534:15[90m)[39m

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
   ‚Üí Cannot read properties of undefined (reading 'data')
 ‚úì __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver un array vac√≠o si el contexto es null o inv√°lido
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
   ‚Üí Cannot read properties of undefined (reading 'data')
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
   ‚Üí Cannot read properties of undefined (reading 'data')
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
   ‚Üí [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
   ‚Üí Cannot read properties of undefined (reading 'data')
 √ó __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
   ‚Üí Cannot read properties of undefined (reading 'data')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 6 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a completar el flujo completo con un contexto v√°lido
TypeError: Cannot read properties of undefined (reading 'data')
 ‚ùØ Proxy.<anonymous> __tests__/core/agent/runClinicalAgent.test.ts:4:47
      2| import { MCPContext } from '../../../src/core/mcp/schema';
      3| import { runClinicalAgent } from '../../../src/core/agent/runClinicalA‚Ä¶
      4| import * as AgentContextBuilder from '../../../src/core/agent/AgentCon‚Ä¶
       |                                               ^
      5| import * as AgentExecutor from '../../../src/core/agent/AgentExecutor';
      6| 
 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:17:32
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:113:26

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/6]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar correctamente un contexto vac√≠o sin lanzar errores
TypeError: Cannot read properties of undefined (reading 'data')
 ‚ùØ Proxy.<anonymous> __tests__/core/agent/runClinicalAgent.test.ts:4:47
      2| import { MCPContext } from '../../../src/core/mcp/schema';
      3| import { runClinicalAgent } from '../../../src/core/agent/runClinicalA‚Ä¶
      4| import * as AgentContextBuilder from '../../../src/core/agent/AgentCon‚Ä¶
       |                                               ^
      5| import * as AgentExecutor from '../../../src/core/agent/AgentExecutor';
      6| 
 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:17:32
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:125:26

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/6]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a devolver al menos 2 sugerencias cuando todo est√° OK
TypeError: Cannot read properties of undefined (reading 'data')
 ‚ùØ Proxy.<anonymous> __tests__/core/agent/runClinicalAgent.test.ts:4:47
      2| import { MCPContext } from '../../../src/core/mcp/schema';
      3| import { runClinicalAgent } from '../../../src/core/agent/runClinicalA‚Ä¶
      4| import * as AgentContextBuilder from '../../../src/core/agent/AgentCon‚Ä¶
       |                                               ^
      5| import * as AgentExecutor from '../../../src/core/agent/AgentExecutor';
      6| 
 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:17:32
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:131:26

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/6]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a manejar errores internos sin lanzar excepciones
Error: [vitest] No "executeAgent" export is defined on the "../../../src/core/agent/AgentExecutor" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "vi.importActual" inside:

vi.mock("../../../src/core/agent/AgentExecutor", async () => {
  const actual = await vi.importActual("../../../src/core/agent/AgentExecutor")
  return {
    ...actual,
    // your mocked methods
  },
})

 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:150:29
    148|   it('deber√≠a manejar errores internos sin lanzar excepciones', async ‚Ä¶
    149|     // Simular un error en executeAgent
    150|     vi.mocked(AgentExecutor.executeAgent).mockRejectedValueOnce(
       |                             ^
    151|       new Error('Error simulado en executeAgent')
    152|     );

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/6]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a usar openai como proveedor por defecto
TypeError: Cannot read properties of undefined (reading 'data')
 ‚ùØ Proxy.<anonymous> __tests__/core/agent/runClinicalAgent.test.ts:4:47
      2| import { MCPContext } from '../../../src/core/mcp/schema';
      3| import { runClinicalAgent } from '../../../src/core/agent/runClinicalA‚Ä¶
      4| import * as AgentContextBuilder from '../../../src/core/agent/AgentCon‚Ä¶
       |                                               ^
      5| import * as AgentExecutor from '../../../src/core/agent/AgentExecutor';
      6| 
 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:17:32
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:162:11

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/6]‚éØ

 FAIL  __tests__/core/agent/runClinicalAgent.test.ts > runClinicalAgent > deber√≠a permitir especificar un proveedor diferente
TypeError: Cannot read properties of undefined (reading 'data')
 ‚ùØ Proxy.<anonymous> __tests__/core/agent/runClinicalAgent.test.ts:4:47
      2| import { MCPContext } from '../../../src/core/mcp/schema';
      3| import { runClinicalAgent } from '../../../src/core/agent/runClinicalA‚Ä¶
      4| import * as AgentContextBuilder from '../../../src/core/agent/AgentCon‚Ä¶
       |                                               ^
      5| import * as AgentExecutor from '../../../src/core/agent/AgentExecutor';
      6| 
 ‚ùØ Module.runClinicalAgent src/core/agent/runClinicalAgent.ts:17:32
 ‚ùØ __tests__/core/agent/runClinicalAgent.test.ts:176:11

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/6]‚éØ

 Test Files  1 failed (1)
      Tests  6 failed | 1 passed (7)
   Start at  16:06:34
   Duration  294ms


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
       rerun x3
[2K[1A[2K[G